# Docker Staging Environment
# Used by: docker-compose.staging.yml

# Environment
NODE_ENV=staging

# Agent Configuration (Staging: 100 agents)
CFN_MAX_AGENTS=100
CFN_SHARD_COUNT=16
CFN_METRICS_ENABLED=true
CFN_ALERTING_ENABLED=true
CFN_LOG_LEVEL=info
CFN_CONSENSUS_THRESHOLD=0.90
CFN_ALERT_COORD_TIME_MS=5000

# Memory and Storage (tmpfs recommended)
CFN_BASE_DIR=/dev/shm/cfn
CFN_AGENT_MEMORY_LIMIT_MB=100
CFN_TOTAL_MEMORY_LIMIT_MB=10240

# Performance
CFN_AGENT_TIMEOUT_MS=30000
CFN_CONSENSUS_TIMEOUT_MS=60000
CFN_SWARM_INIT_TIMEOUT_MS=10000
CFN_ENABLE_CACHING=true
CFN_CACHE_TTL_SECONDS=300
CFN_MAX_CONCURRENT_OPERATIONS=50

# Monitoring
CFN_METRICS_COLLECTION_INTERVAL_MS=5000
CFN_METRICS_RETENTION_HOURS=168
CFN_TRACK_COORDINATION_TIME=true
CFN_TRACK_MEMORY_USAGE=true
CFN_TRACK_AGENT_LIFECYCLE=true

# Alerting Thresholds
CFN_ALERT_MEMORY_THRESHOLD_PERCENT=80
CFN_ALERT_AGENT_FAILURE_COUNT=3
CFN_ALERT_CONSENSUS_FAILURE_THRESHOLD=0.70

# Security (Staging: Enabled)
CFN_ENABLE_AGENT_AUTH=true
CFN_AGENT_AUTH_TOKEN=${CFN_AGENT_AUTH_TOKEN}
CFN_ENABLE_TLS=false
CFN_ENABLE_RATE_LIMITING=true
CFN_RATE_LIMIT_REQUESTS_PER_MINUTE=500

# MCP Server
CFN_MCP_SERVER_ENABLED=true
CFN_MCP_SERVER_PORT=3000

# Testing and Debugging
CFN_TEST_MODE=false
CFN_DEBUG_AGENT_SPAWN=false
CFN_DEBUG_CONSENSUS=false
CFN_DEBUG_MEMORY=false
CFN_VERBOSE_LOGGING=false

# Chaos Engineering (Staging only)
CFN_CHAOS_ENABLED=true
CFN_CHAOS_FAILURE_RATE=0.05
CFN_CHAOS_LATENCY_MS=100

# Consensus Algorithm
CFN_CONSENSUS_ALGORITHM=byzantine

# Database (Optional)
CFN_DB_ENABLED=true
CFN_DB_TYPE=sqlite
CFN_DB_PATH=/var/lib/cfn/metrics.db
