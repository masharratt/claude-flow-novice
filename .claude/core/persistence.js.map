{"version":3,"sources":["../../../src/core/persistence.ts"],"names":["Database","join","mkdir","PersistenceManager","db","dbPath","dataDir","initialize","recursive","createTables","execute","saveAgent","agent","stmt","prepare","run","id","type","name","status","capabilities","systemPrompt","maxConcurrentTasks","priority","createdAt","getAgent","row","get","system_prompt","max_concurrent_tasks","created_at","getActiveAgents","rows","all","map","updateAgentStatus","saveTask","task","description","dependencies","metadata","assignedAgent","progress","error","completedAt","getTask","assigned_agent","undefined","completed_at","getActiveTasks","updateTaskStatus","updateTaskProgress","getStats","totalAgents","activeAgents","totalTasks","pendingTasks","completedTasks","count","close"],"mappings":"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"}