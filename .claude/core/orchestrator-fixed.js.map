{"version":3,"sources":["../../../src/core/orchestrator-fixed.ts"],"names":["JsonPersistenceManager","Orchestrator","agents","Map","tasks","sessions","persistence","workflows","started","config","eventBus","logger","start","Error","info","initialize","loadFromPersistence","emit","timestamp","Date","persistedAgents","getActiveAgents","agent","set","id","type","name","status","assignedTasks","createdAt","persistedTasks","getActiveTasks","task","description","progress","assignedAgent","error","size","stop","clear","close","spawnAgent","profile","agentId","now","Math","random","toString","substr","saveAgent","capabilities","systemPrompt","maxConcurrentTasks","priority","terminateAgent","get","updateAgentStatus","delete","reason","Array","from","values","getAgentInfo","submitTask","taskId","taskInfo","saveTask","dependencies","metadata","availableAgents","filter","a","length","push","updateTaskStatus","getTaskQueue","getTaskStatus","cancelTask","getActiveSessions","terminateSession","sessionId","session","executeWorkflow","workflow","workflowId","setTimeout","getWorkflowStatus","healthCheck","healthy","memory","terminalPool","mcp"],"mappings":"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"}