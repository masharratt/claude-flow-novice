{"version":3,"sources":["../../../src/core/event-bus.ts"],"names":["SystemEvents","TypedEventEmitter","TypedEventBus","eventCounts","Map","lastEventTimes","debug","emit","event","data","console","String","count","get","set","Date","now","getEventStats","stats","entries","lastTime","push","lastEmitted","sort","a","b","resetStats","clear","EventBus","instance","typedBus","getInstance","on","handler","off","once","waitFor","timeoutMs","Promise","resolve","reject","timer","clearTimeout","setTimeout","Error","onFiltered","filter","removeAllListeners","eventBus"],"mappings":"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"}