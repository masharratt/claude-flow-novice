# Go Project Setup with Claude-Flow

Complete guide to setting up Go projects with claude-flow integration for accelerated development.

## 🚀 Quick Setup

### 1. Initialize New Go Project
```bash
# Create project with claude-flow assistance
npx claude-flow sparc run architect "Go project with modern toolchain"

# Or use traditional Go setup with claude-flow integration
mkdir my-go-project && cd my-go-project
go mod init github.com/username/my-go-project

# Initialize claude-flow in project
npx claude-flow init --language go
```

### 2. Project Structure Generation
```bash
# Generate standard Go project structure
npx claude-flow sparc run coder "standard Go project structure with best practices"
```

**Generated Structure:**
```
my-go-project/
├── cmd/                    # Application entry points
│   └── server/
│       └── main.go
├── internal/               # Private application code
│   ├── handlers/
│   ├── models/
│   ├── services/
│   └── config/
├── pkg/                    # Public library code
├── api/                    # API definitions (OpenAPI, gRPC)
├── web/                    # Web assets
├── scripts/                # Build and development scripts
├── deployments/            # Docker, Kubernetes configs
├── test/                   # Integration tests
├── docs/                   # Documentation
├── .github/workflows/      # CI/CD workflows
├── go.mod
├── go.sum
├── Makefile
├── Dockerfile
└── README.md
```

## 🛠️ Go Modules and Dependencies

### Modern Go Modules Setup
```bash
# Initialize with claude-flow assisted dependency management
npx claude-flow sparc run coder "Go project with essential dependencies for web service"
```

**Essential Dependencies:**
```go
// go.mod - Generated by claude-flow
module github.com/username/my-go-project

go 1.21

require (
    github.com/gin-gonic/gin v1.9.1
    github.com/golang-jwt/jwt/v5 v5.0.0
    github.com/spf13/viper v1.16.0
    github.com/stretchr/testify v1.8.4
    go.uber.org/zap v1.25.0
    gorm.io/gorm v1.25.4
    gorm.io/driver/postgres v1.5.2
)
```

### Dependency Management Best Practices
```bash
# Update dependencies with security checks
go get -u ./...
go mod tidy
go mod verify

# Use claude-flow for security analysis
npx claude-flow sparc run reviewer "analyze Go dependencies for security vulnerabilities"
```

## ⚙️ Development Environment

### VS Code Integration
```json
// .vscode/settings.json - Generated by claude-flow
{
    "go.useLanguageServer": true,
    "go.lintTool": "golangci-lint",
    "go.formatTool": "gofmt",
    "go.testFlags": ["-v", "-race"],
    "go.buildFlags": ["-race"],
    "go.vetFlags": ["-all"],
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
        "source.organizeImports": true
    }
}
```

### Makefile for Development
```makefile
# Makefile - Generated by claude-flow
.PHONY: build test lint fmt vet clean

BINARY_NAME=my-go-project
BUILD_DIR=./bin

build:
	go build -o $(BUILD_DIR)/$(BINARY_NAME) ./cmd/server

test:
	go test -v -race -coverprofile=coverage.out ./...

test-integration:
	go test -v -tags=integration ./test/...

lint:
	golangci-lint run

fmt:
	go fmt ./...

vet:
	go vet ./...

clean:
	go clean
	rm -rf $(BUILD_DIR)

deps:
	go mod download
	go mod tidy

security:
	gosec ./...

benchmark:
	go test -bench=. -benchmem ./...

coverage:
	go tool cover -html=coverage.out -o coverage.html

docker-build:
	docker build -t $(BINARY_NAME) .

docker-run:
	docker run -p 8080:8080 $(BINARY_NAME)
```

## 🔧 Claude-Flow Integration

### Pre-commit Hooks
```bash
# Install pre-commit hooks with claude-flow
npx claude-flow hooks install

# Configure Go-specific hooks
cat > .pre-commit-config.yaml << EOF
repos:
  - repo: local
    hooks:
      - id: go-fmt
        name: go fmt
        entry: go fmt
        language: system
        files: '\.go$'
      - id: go-vet
        name: go vet
        entry: go vet
        language: system
        files: '\.go$'
      - id: golangci-lint
        name: golangci-lint
        entry: golangci-lint run
        language: system
        files: '\.go$'
EOF
```

### Claude-Flow Configuration
```yaml
# .claude-flow.yml
project:
  language: go
  type: web-service

agents:
  default:
    - coder
    - reviewer
    - tester

go:
  version: "1.21"
  modules: true
  testing:
    race: true
    coverage: true
  linting:
    tool: golangci-lint
  formatting:
    tool: gofmt

workflows:
  development:
    - format
    - lint
    - test
    - build

  ci:
    - security-scan
    - test-race
    - benchmark
    - coverage-check
```

## 🧪 Testing Setup

### Test Configuration
```bash
# Generate comprehensive test setup
npx claude-flow sparc run tester "Go testing framework with table tests and mocks"
```

**Generated Test Structure:**
```go
// internal/handlers/user_test.go
package handlers_test

import (
    "bytes"
    "encoding/json"
    "net/http"
    "net/http/httptest"
    "testing"

    "github.com/gin-gonic/gin"
    "github.com/stretchr/testify/assert"
    "github.com/stretchr/testify/mock"

    "github.com/username/my-go-project/internal/handlers"
)

func TestUserHandler(t *testing.T) {
    tests := []struct {
        name           string
        method         string
        url            string
        body           interface{}
        expectedStatus int
        expectedBody   string
    }{
        {
            name:           "Create user success",
            method:         "POST",
            url:            "/users",
            body:           map[string]string{"name": "John", "email": "john@example.com"},
            expectedStatus: http.StatusCreated,
        },
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // Test implementation
        })
    }
}
```

## 🚀 Build and Deployment

### Docker Configuration
```dockerfile
# Dockerfile - Generated by claude-flow
FROM golang:1.21-alpine AS builder

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download

COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main ./cmd/server

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/

COPY --from=builder /app/main .
EXPOSE 8080
CMD ["./main"]
```

### CI/CD with GitHub Actions
```yaml
# .github/workflows/go.yml - Generated by claude-flow
name: Go CI/CD

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: Set up Go
      uses: actions/setup-go@v3
      with:
        go-version: 1.21

    - name: Install dependencies
      run: go mod download

    - name: Run tests
      run: go test -v -race -coverprofile=coverage.out ./...

    - name: Run golangci-lint
      uses: golangci/golangci-lint-action@v3

    - name: Upload coverage
      uses: codecov/codecov-action@v3
```

## 📊 Monitoring and Metrics

### Application Metrics
```go
// internal/metrics/metrics.go - Generated by claude-flow
package metrics

import (
    "github.com/prometheus/client_golang/prometheus"
    "github.com/prometheus/client_golang/prometheus/promauto"
)

var (
    RequestsTotal = promauto.NewCounterVec(
        prometheus.CounterOpts{
            Name: "http_requests_total",
            Help: "Total number of HTTP requests",
        },
        []string{"method", "endpoint", "status"},
    )

    RequestDuration = promauto.NewHistogramVec(
        prometheus.HistogramOpts{
            Name: "http_request_duration_seconds",
            Help: "Duration of HTTP requests",
        },
        []string{"method", "endpoint"},
    )
)
```

## 🔧 Development Commands

```bash
# Start development with claude-flow assistance
npx claude-flow sparc run coder "start development server with hot reload"

# Generate code with best practices
npx claude-flow sparc run architect "add new REST endpoint with validation"

# Run comprehensive tests
npx claude-flow sparc run tester "run all tests with coverage report"

# Deploy to staging
npx claude-flow sparc run deployer "deploy to staging environment"
```

## 🛡️ Security Configuration

```bash
# Security scanning with claude-flow
npx claude-flow sparc run security-auditor "Go security audit with gosec"

# Dependency vulnerability check
npx claude-flow sparc run reviewer "check Go dependencies for vulnerabilities"
```

**Next Steps:**
- [Web Frameworks](../frameworks/) - Choose and configure web framework
- [Testing Strategies](../testing/) - Implement comprehensive testing
- [Examples](../examples/) - See complete project examples